<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Distributed training :: Platform Foundation Bootcamp - RHOAI</title>
    <link rel="canonical" href="https://redhat-ai-services.github.io/rhoai-platform-foundation-bootcamp-instructions/modules/50_distributed_training.html">
    <meta name="generator" content="Antora 3.1.14">
<link rel="stylesheet" href="../_/css/site.css"><link rel="stylesheet" href="../_/css/site-extra.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<meta name="robots" content="all">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://demo.redhat.com/images/favicon.ico" type="image/x-icon">
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar"  style="background-color: #131313 !important;">
    <div class="navbar-brand">
      <div style="display: flex; flex-direction:row; padding: 12px 32px; gap: 16px;">
     </div>
      <div class="navbar-item site-title" style="color: #fff !important;flex: 1;">Platform Foundation Bootcamp - RHOAI</div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title" style="display: none;"><a href="index.html" class=" query-params-link">Navigation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="01_welcome.html">Welcome and Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="05_environment_provisioning.html">Environment Provisioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">AI-Accelerator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="20_ai-accelerator_review.html">Project Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="07_installation.html">Bootstrap Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="30_gitops_env_setup_dev_prod.html">Setup Dev &amp; Prod Environments</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">RHOAI Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="32_dashboard_configuration.html">RHOAI Dashboard Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Notebooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="31_custom_notebook.html">Custom Notebook</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="09_remote_connect_notebook.html">Connect to Workbench Kernel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Train, Store (S3), Deploy</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="33_model_training_car.html">Model Training</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="34_using_s3_storage.html">Using S3 Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="36_deploy_model.html">Deploy Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Science Pipelines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="40_setup_pipeline_server.html">Setup Pipeline Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="41_introduction_to_kfp_pipelines.html">KFP Pipelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kfp_elyra_differences.html">Comparison between Elyra and KFP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="build_custom_runtime_image.html">Custom Runtime Image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="introduction_to_elyra_pipelines.html">Elyra Pipelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="42_working_with_pipelines.html">Working with Pipelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="43_custom_runtime_image.html">Advanced Pipeline Customization</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Distributed Training</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="50_distributed_training.html">Ray Cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Large Language Model [LLM]</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="60_llm_explore.html">Explore LLMs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="70_rag_llm.html">RAG with LLM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="composer_ai.html">Composer AI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Monitoring Data Science Models</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="80_trustyai_overview.html">TrustyAI Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="81_llm_evaluation.html">Evaluating Large Language Models</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Disconnected Environment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="disconnected_install.html">RHOAI on Disconnected Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">GPU as a Service</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="90_environment_provisioning.html">Provisioning a GPU Environment with NVIDIA A10G Tensor Core GPU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="91_gpu_as_a_service_intro.html">Introduction: GPU as a Service with GPU slicing and Kueue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="92_nvidia_gpu_operator.html">Configuring NVIDIA GPU Time-Slicing on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="93_kueue_setup.html">Red Hat build of Kueue Operator Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="94_kueue_gpu_pricing_tier.html">Implementing GPU Pricing Tiers with Kueue</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="95_kueue_fair_sharing.html">Advanced GPU Quota Management and Preemption with Kueue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Model-as-a-Service</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="100_maas_intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="101_maas_bootstrap.html">Environment Bootstrap</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="102_maas_as_developer.html">Using MaaS as Developer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="103_maas_as_platform_engineer.html">Configure a new model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="104_maas_monitor.html">Monitor usage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Agentic AI with Llama Stack</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="97_agentic_ai_llama_stack_introduction.html">Introduction &amp; Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="98_agentic_ai_llama_stack_notebook_agents.html">Agentic AI Agents with Llama Stack Clients</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="99_agentic_ai_llama_stack_playground.html">Llama Stack Playground</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#99_useful_tips.adoc">Useful Tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#97_syncing_fork.adoc">Syncing Forked Project</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Navigation</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="01_welcome.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>Distributed Training</li>
    <li><a href="50_distributed_training.html">Ray Cluster</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Distributed training</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will cover how to train a model on multiple containers using the Ray Cluster capabilities of the RHOAI platform.</p>
</div>
<div class="paragraph">
<p>The official documentation on how to perform distributed training with Ray can be found here: <a href="https://docs.redhat.com/en/documentation/red_hat_openshift_ai_self-managed/2-latest/html-single/working_with_distributed_workloads/index">working with distributed workloads</a>.</p>
</div>
<div class="paragraph">
<p>The ray cluster documentation can be found here: <a href="https://docs.ray.io/en/latest/cluster/getting-started.html">Ray Clusters Documentation</a>.</p>
</div>
<div class="paragraph">
<p>Kueue is a kubernetes-native system that manages quotas and how jobs consume them. Kueue decides when a job should wait, when a job should be admitted to start (as in pods can be created) and when a job should be preempted (as in active pods should be deleted). Find more information about Kueue here: <a href="https://kueue.sigs.k8s.io/docs/">Kueue Documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_codeflare_ray_and_kueue_in_the_datasciencecluster"><a class="anchor" href="#_enable_codeflare_ray_and_kueue_in_the_datasciencecluster"></a>Enable Codeflare, Ray, and Kueue in the DataScienceCluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to do Distributed Training, we&#8217;ll need to use Codeflare, Ray, and Kueue. Luckily for us, RHOAI already provides the CRDs (Custom Definition Resources) for Codeflare, Ray, and Kueue that are used for running distributed training. We just need to enable them in the DataScienceCluster.</p>
</div>
<div class="paragraph">
<p>As you can see in the DataScienceCluster, the components <code>Codeflare</code>, <code>Ray</code>, and <code>Kueue</code> are in the <strong><em>Removed</em></strong> state.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/distributed-training-dsc-removed.png" alt="dsc codeflare" width="ray" height="kueue removed">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s enable <code>Codeflare</code>, <code>Ray</code>, and <code>Kueue</code> in the DataScienceCluster.</p>
</div>
<div class="paragraph">
<p>If you recall, when creating our cluster overlays, we set up the <em>parasol-insurance-dev</em> and <em>parasol-insurance-prod</em> overlays from the <a href="https://redhat-ai-services.github.io/ai-accelerator-bootcamp-instructions/modules/30_gitops_env_setup_dev_prod.html#_setting_up_ai_accelerator_project_for_dev_cluster">Setup Dev &amp; Prod section</a>. In step 3, we copied <code>componets/argocd/apps/overlays/eus-2.16</code> into our <em>parasol-insurance-*</em> overlay folder. Because we did this, our RHOAI operator is pointing to the <code>components/operators/openshift-ai/aggregate/overlays/eus-2.16</code> folder. This means that the changes in this overlay will be applied to our <em>parasol-insurance-*</em> overlay. So in order to make changes to the RHOAI operator, we&#8217;ll need to make changes to the <code>components/operators/openshift-ai/aggregate/overlays/eus-2.16</code> folder.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/patch-operators-list-parasol-overlay.png" alt="patch operators list parasol overlay">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the <code>components/operators/openshift-ai/instance/overlays/eus-2.16</code> folder, update the <strong>kustomzation.yaml</strong> file by adding the following:</p>
<div class="listingblock console-input">
<div class="title">components/operators/openshift-ai/instance/overlays/eus-2.16/kustomization.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">  - ../../components/components-distributed-compute</code></pre>
</div>
</div>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="listingblock console-input">
<div class="title">components/operators/openshift-ai/instance/overlays/eus-2.16/kustomization.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: redhat-ods-applications

resources:
  - ../../base

components:
  - ../../components/components-serving
  - ../../components/components-training
  - ../../components/components-trustyai
  - ../../components/default-notebook-pvc-size
  - ../../components/idle-notebook-culling
  - ../../components/notebook-pod-sizes
  - ../../components/make-kubeadmin-cluster-admin
  - ../../components/model-server-pod-sizes
  - ../../components/rhoai-dashboard-access
  - ../../components/auth-with-authorino
  - ../../components/components-distributed-compute</code></pre>
</div>
</div>
</div>
</details>
</li>
</ol>
</div>
<div class="paragraph">
<p>This will add the <code>components/operators/openshift-ai/instance/components/components-distributed-compute</code> folder to the list of components that the <code>components/operators/openshift-ai/instance/overlays/eus-2.16/kustomization.yaml</code> will apply.</p>
</div>
<div class="paragraph">
<p>In the <code>components/operators/openshift-ai/instance/components/components-distributed-compute</code> folder, the <strong>kustomization.yaml</strong> file contains a patch function that will patch the DataScienceCluster resource. The patch will enable the <code>Codeflare</code>, <code>Ray</code>, and <code>Kueue</code> components in the DataScienceCluster yaml by setting the respective components from the <strong><em>Removed</em></strong> state to the <strong><em>Managed</em></strong> state.</p>
</div>
<div class="paragraph">
<p>After the changes have been committed to your fork, ArgoCD will sync with the changes and the DataScienceCluster will update and restart with the new components enabled.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/distributed-training-dsc-added.png" alt="dsc codeflare" width="ray" height="kueue managed">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_the_kueue_configuration_with_gitops"><a class="anchor" href="#_create_the_kueue_configuration_with_gitops"></a>Create the Kueue configuration with GitOps</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the <code>parasol-insurance</code> tenant directory, create a new directory called <code>kueue</code>, and create the <code>base</code> and <code>overlays</code> directories inside it.</p>
</li>
<li>
<p>In the <code>base</code> directory, create a file called <code>kustomization.yaml</code> with the following content:</p>
<div class="listingblock console-input">
<div class="title">kueue/base/kustomization.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - cluster-queue.yaml
  - default-flavor.yaml
  - local-queue.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>base</code> directory, create a file called <code>cluster-queue.yaml</code> with the following content:</p>
<div class="listingblock console-input">
<div class="title">kueue/base/cluster-queue.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kueue.x-k8s.io/v1beta1
kind: ClusterQueue
metadata:
  name: "cluster-queue"
spec:
  namespaceSelector: {}  # match all.
  resourceGroups:
  - coveredResources: ["cpu", "memory", "nvidia.com/gpu"]
    flavors:
    - name: "default-flavor"
      resources:
      - name: "cpu"
        nominalQuota: 9
      - name: "memory"
        nominalQuota: 36Gi
      - name: "nvidia.com/gpu"
        nominalQuota: 0</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>base</code> directory, create a file called <code>default-flavor.yaml</code> with the following content:</p>
<div class="listingblock console-input">
<div class="title">kueue/base/default-flavor.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kueue.x-k8s.io/v1beta1
kind: ResourceFlavor
metadata:
  name: default-flavor</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>base</code> directory, create a file called <code>local-queue.yaml</code> with the following content:</p>
<div class="listingblock console-input">
<div class="title">kueue/base/local-queue.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kueue.x-k8s.io/v1beta1
kind: LocalQueue
metadata:
  namespace: parasol-insurance
  name: local-queue-parasol-insurance
  annotations:
    kueue.x-k8s.io/default-queue: 'true'
spec:
  clusterQueue: cluster-queue</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>overlays</code> directory, create the <code>parasol-insurance-dev</code> directory.</p>
</li>
<li>
<p>In the <code>parasol-insurance-dev</code> directory, create a file called <code>kustomization.yaml</code> with the following content:</p>
<div class="listingblock console-input">
<div class="title">kueue/overlays/parasol-insurance-dev/kustomization.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base</code></pre>
</div>
</div>
</li>
<li>
<p>Push your changes to the Git repository, and wait for the application to sync in ArgoCD.</p>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/01-kueue-sync.png" alt="Kueue sync">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_distributed_workloads"><a class="anchor" href="#_running_distributed_workloads"></a>Running distributed workloads</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_basic_ray_cluster_setup"><a class="anchor" href="#_basic_ray_cluster_setup"></a>Basic Ray cluster setup</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <code>standard-workbench</code> workbench (see 'Using S3 storage' sections for instructions how <code>standard-workbench</code> is created), create a new Jupyter Notebook with the name <code>0_basic_ray.ipynb</code>.</p>
</li>
<li>
<p>Add a cell with the imports:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from codeflare_sdk import Cluster, ClusterConfiguration, TokenAuthentication
from codeflare_sdk import generate_cert</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to authenticate with the OpenShift cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">auth = TokenAuthentication(
    token = "sha256~M1oYD5GM1mAXDrDCWPhXoGU2vEnwktp79JEhAvmS4Xo",
    server = "https://api.cluster-clplg.dynamic.redhatworkshops.io:6443",
    skip_tls=True
)
auth.login()</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Replace the <code>token</code> and <code>server</code> values with the correct values for your OpenShift cluster.</p>
</div>
<div class="paragraph">
<p>You can find these values in the OpenShift Web Console by clicking on your username in the top right corner and selecting <code>Copy Login Command</code>.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/02-server-token.png" alt="server token">
</div>
</div>
<div class="paragraph">
<p>Note that user account tokens are valid for 24 hours only. If longer living tokens are required consider using Service Accounts with either time-limited API tokens or long-lived tokens.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to configure a Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster = Cluster(ClusterConfiguration(
    name='raytest',
    namespace='parasol-insurance',
    head_gpus=0, # For GPU enabled workloads set the head_gpus and num_gpus
    num_gpus=0,
    num_workers=2,
    worker_memory_requests=4,
    worker_memory_limits=4,
    worker_cpu_requests=1,
    worker_cpu_limits=1,
    image="quay.io/project-codeflare/ray:latest-py39-cu118",
    write_to_file=False, # When enabled Ray Cluster yaml files are written to /HOME/.codeflare/resources
    # local_queue="local-queue-parasol-insurance" # Specify the local queue manually
))</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to start the Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster.up()</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to check the status of the Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster.status()</code></pre>
</div>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/03-cluster-up-and-status.png" alt="Cluster up and status">
</div>
</div>
</li>
<li>
<p>repeat running the <code>cluster.status()</code> cell until the status is <code>Active</code>.</p>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/04-cluster-ready.png" alt="Cluster ready">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The status of the cluster will be <code>Inactive</code> until the cluster is fully up and running.</p>
</div>
<div class="paragraph">
<p>If the cluster fails to start, it may go to the <code>Suspended</code> status. In this case, you can check the logs of the cluster by running the <code>cluster.logs()</code> instruction.</p>
</div>
<div class="paragraph">
<p>The <code>cluster.status()</code> instruction is a monitoring instruction that will return the status of the cluster.</p>
</div>
<div class="paragraph">
<p>You can also use the <code>cluster.logs()</code> instruction to check the logs of the cluster.</p>
</div>
<div class="paragraph">
<p>You can use the <code>cluster.wait_ready()</code> instruction to wait until the cluster is fully up and running.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to setup the Ray cluster certificates for mutual TLS:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">generate_cert.generate_tls_cert(cluster.config.name, cluster.config.namespace)
generate_cert.export_env(cluster.config.name, cluster.config.namespace)</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generate cert instructions only work in a Ray cluster that is up and running. If you run this cell before the cluster is ready, you will get an error.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Mutual Transport Layer Security (mTLS) is enabled by default in the CodeFlare component in OpenShift AI. You must include the Ray cluster authentication code to enable the Ray client that runs within a notebook to connect to a secure Ray cluster that has mTLS enabled.</p>
</div>
<div class="paragraph">
<p>With mTLS mechanism, the Ray Cluster pods create certificates that are used for mutual Transport Layer Security (mTLS), a form of mutual authentication, between Ray Cluster nodes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Navigate to the Ray cluster dashboard using the link provided by the <code>cluster.status()</code> cell.</p>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/05-ray-dashboard.png" alt="Cluster dashboard">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Find more information about the cluster dashboard here: <a href="https://docs.ray.io/en/latest/ray-observability/getting-started.html">Ray Cluster Dashboard</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to stop the Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster.down()</code></pre>
</div>
</div>
</li>
<li>
<p>Notice that the Ray cluster will be stopped, and the status will be <code>Inactive</code>. Also, the Ray cluster dashboard will be unavailable.</p>
</li>
<li>
<p>Add a cell to log out of the OpenShift cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">auth.logout()</code></pre>
</div>
</div>
</li>
<li>
<p>Save and close the notebook.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_a_distributed_workload"><a class="anchor" href="#_running_a_distributed_workload"></a>Running a distributed workload</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <code>standard-workbench</code> workbench (see 'Using S3 storage' sections for instructions how <code>standard-workbench</code> is created), create a new python script file with the name <code>mnist_fashion.py</code>.</p>
</li>
<li>
<p>Add the following code to the <code>mnist_fashion.py</code> file:</p>
<div class="listingblock console-input">
<div class="title">mnist_fashion.py</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import torch
import torch.nn as nn
import ray
from torch.utils.data import DataLoader
from torchvision import datasets
from torchvision.transforms import ToTensor
from ray.train.torch import TorchTrainer
from ray.train import ScalingConfig


def get_dataset():
    return datasets.FashionMNIST(
        root="/tmp/data",
        train=True,
        download=True,
        transform=ToTensor(),
    )


class NeuralNetwork(nn.Module):
    def __init__(self):
        super().__init__()
        self.flatten = nn.Flatten()
        self.linear_relu_stack = nn.Sequential(
            nn.Linear(28 * 28, 512),
            nn.ReLU(),
            nn.Linear(512, 512),
            nn.ReLU(),
            nn.Linear(512, 10),
        )

    def forward(self, inputs):
        inputs = self.flatten(inputs)
        logits = self.linear_relu_stack(inputs)
        return logits


def get_dataset():
    return datasets.FashionMNIST(
        root="/tmp/data",
        train=True,
        download=True,
        transform=ToTensor(),
    )


def train_func_distributed():
    num_epochs = 3
    batch_size = 64

    dataset = get_dataset()
    dataloader = DataLoader(dataset, batch_size=batch_size, shuffle=True)
    dataloader = ray.train.torch.prepare_data_loader(dataloader)

    model = NeuralNetwork()
    model = ray.train.torch.prepare_model(model)

    criterion = nn.CrossEntropyLoss()
    optimizer = torch.optim.SGD(model.parameters(), lr=0.01)

    for epoch in range(num_epochs):
        if ray.train.get_context().get_world_size() &gt; 1:
            dataloader.sampler.set_epoch(epoch)

        for inputs, labels in dataloader:
            optimizer.zero_grad()
            pred = model(inputs)
            loss = criterion(pred, labels)
            loss.backward()
            optimizer.step()
        print(f"epoch: {epoch}, loss: {loss.item()}")


# For GPU Training, set `use_gpu` to True.
use_gpu = False

trainer = TorchTrainer(
    train_func_distributed,
    scaling_config=ScalingConfig(
        num_workers=3, use_gpu=use_gpu
    ),  # num_workers = number of worker nodes with the ray head node included
)

results = trainer.fit()</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>mnist_fashion.py</code> script trains a neural network model using the Fashion MNIST dataset. The script uses the Ray distributed training capabilities to train the model on multiple containers.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the file.</p>
</li>
<li>
<p>Add a <code>requirements.txt</code> file with the following content:</p>
<div class="listingblock console-input">
<div class="title">requirements.txt</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">pytorch_lightning==1.5.10
ray_lightning
torchmetrics==0.9.1
torchvision==0.12.0</code></pre>
</div>
</div>
</li>
<li>
<p>Using the <code>standard-workbench</code> workbench (see 'Using S3 storage' sections for instructions how <code>standard-workbench</code> is created), create a new Jupyter Notebook with the name <code>1_distributed_training.ipynb</code>.</p>
</li>
<li>
<p>Add a cell with the imports:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from codeflare_sdk import Cluster, ClusterConfiguration, TokenAuthentication
from codeflare_sdk import generate_cert</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to authenticate with the OpenShift cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">auth = TokenAuthentication(
    token = "sha256~M1oYD5GM1mAXDrDCWPhXoGU2vEnwktp79JEhAvmS4Xo",
    server = "https://api.cluster-clplg.dynamic.redhatworkshops.io:6443",
    skip_tls=True
)
auth.login()</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Replace the <code>token</code> and <code>server</code> values with the correct values for your OpenShift cluster.</p>
</div>
<div class="paragraph">
<p>You can find these values in the OpenShift Web Console by clicking on your username in the top right corner and selecting <code>Copy Login Command</code>.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/02-server-token.png" alt="server token">
</div>
</div>
<div class="paragraph">
<p>Note that user account tokens are valid for 24 hours only. If longer living tokens are required consider using Service Accounts with either time-limited API tokens or long-lived tokens.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to configure a Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster = Cluster(ClusterConfiguration(
    name='jobtest',
    namespace='parasol-insurance',
    head_gpus=0,
    num_gpus=0,
    num_workers=2,
    min_cpus=1,
    max_cpus=1,
    min_memory=4,
    max_memory=4,
    image="quay.io/project-codeflare/ray:latest-py39-cu118",
    write_to_file=False
))</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to start the Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># Bring up the cluster
cluster.up()
cluster.wait_ready()</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This cell will start the Ray cluster and wait until the cluster is fully up and running.
Note that the cell is taking longer to run because the Ray cluster is starting.
Wait to continue until the cell finishes running (the asterisk <code>*</code> will change to a number).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the OpenShift web console, you can monitor the Ray cluster pods in the <code>parasol-insurance</code> namespace, search for the pods with the <code>jobtest</code> name.</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/06-jobtest-pods.png" alt="Ray cluster pods">
</div>
</div>
<div class="paragraph">
<p>You can also search for the <code>workload</code> resource in the <code>parasol-insurance</code>:</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/07-jobtest-workload.png" alt="Ray cluster workload">
</div>
</div>
<div class="paragraph">
<p>In the workload details, you can see the <strong>Conditions</strong> section, where you can check the cluster provisioning status:</p>
</div>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/08-jobtest-workload-conditions.png" alt="Ray cluster workload conditions">
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to setup the Ray cluster certificates for mutual TLS:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">generate_cert.generate_tls_cert(cluster.config.name, cluster.config.namespace)
generate_cert.export_env(cluster.config.name, cluster.config.namespace)</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generate cert instructions only work in a Ray cluster that is up and running. If you run this cell before the cluster is ready, you will get an error.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a cell to check on the cluster details:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster.details()</code></pre>
</div>
</div>
</li>
<li>
<p>Add a cell to configure the training job submission:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># Initialize the Job Submission Client
"""
The SDK will automatically gather the dashboard address and authenticate using the Ray Job Submission Client
"""
client = cluster.job_client
# Submit an example mnist job using the Job Submission Client
submission_id = client.submit_job(
    entrypoint="python mnist_fashion.py",
    runtime_env={"working_dir": "./","pip": "requirements.txt"},
)
print(submission_id)</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This cell will try to upload everything in the current working directory to the Ray cluster. Make sure that older files are not uploaded by adding the <strong><em>excludes</em></strong> parameter to the <code>runtime_env</code>.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># Initialize the Job Submission Client
"""
The SDK will automatically gather the dashboard address and authenticate using the Ray Job Submission Client
"""
client = cluster.job_client
# Submit an example mnist job using the Job Submission Client
submission_id = client.submit_job(
    entrypoint="python mnist_fashion.py",
    runtime_env={"working_dir": "./","pip": "requirements.txt","excludes": ["/weights/accident_detect.onnx"]},
)
print(submission_id)</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the following code lines to create cells to monitor the job status:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># List all existing jobs
client.list_jobs()

# Get the job's status
client.get_job_status(submission_id)

# Get job related info
client.get_job_info(submission_id)

# Get the job's logs
client.get_job_logs(submission_id)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can use the <code>client.get_job_status(submission_id)</code> instruction to check the status of the job. The status can be <code>Pending</code>, <code>Running</code>, <code>Succeeded</code>, or <code>Failed</code>.</p>
</div>
<div class="paragraph">
<p>You can iterate over the <code>client.get_job_status(submission_id)</code> instruction to create a cell that waits until the job reaches the <code>Succeeded</code> status.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">while client.get_job_status(submission_id).upper() != "SUCCEEDED":
    pass
print("Job Succeeded")</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Open the Ray cluster dashboard and monitor the job status.</p>
<div class="imageblock bordershadow">
<div class="content">
<img src="_images/09-ray-dashboard-job.png" alt="Ray dashboard job">
</div>
</div>
</li>
<li>
<p>Wait for the job to finish.</p>
</li>
<li>
<p>Add a cell to stop the Ray cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">cluster.down()</code></pre>
</div>
</div>
</li>
<li>
<p>Notice that the Ray cluster will be stopped, and the status will be <code>Inactive</code>. Also, the Ray cluster dashboard will be unavailable.</p>
</li>
<li>
<p>Add a cell to log out of the OpenShift cluster:</p>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">auth.logout()</code></pre>
</div>
</div>
</li>
<li>
<p>Save and close the notebook.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references_and_further_reading"><a class="anchor" href="#_references_and_further_reading"></a>References and Further Reading</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.ray.io/en/latest/ray-overview/getting-started.html">Ray.io documentation</a> - the Ray docs with some great example code libraries for various features, check out the Getting Started section as well as the Kubernetes architecture guide.</p>
</li>
<li>
<p><a href="https://developers.redhat.com/articles/2024/09/30/fine-tune-llama-openshift-ai?source=sso#">How to fine-tune Llama 3.1 with Ray on OpenShift AI</a> - a great example of fine tuning a large LLM using multiple GPU worker nodes, and monitoring the training execution cycle.</p>
</li>
<li>
<p><a href="https://github.com/opendatahub-io/distributed-workloads">Source Code</a> - check out the source code repo, which includes additional examples of distributed training.</p>
</li>
<li>
<p><a href="https://ai-on-openshift.io/demos/llama2-finetune/llama2-finetune/">Fine-Tune Llama 2 Models with Ray and DeepSpeed</a> - another distributed training example from ai-on-openshift.com</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_questions_for_further_consideration"><a class="anchor" href="#_questions_for_further_consideration"></a>Questions for Further Consideration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>How many GPUs did Meta use to train Llama3? Hint: Search <a href="https://ai.meta.com/research/publications/the-llama-3-herd-of-models/">this paper</a> for the term <code>16K</code> for some fascinating insights into massive distributed training.</p>
</li>
<li>
<p>How many GPU cores would you realistically need to retrain the Llama3 models?</p>
</li>
<li>
<p>How many GPU cores would you realistically need to retrain the <a href="https://www.ibm.com/new/ibm-granite-3-0-open-state-of-the-art-enterprise-models">Granite models</a>?</p>
</li>
<li>
<p>What else can Ray help with, other than distributed model training? Hint: See the Ray getting started guide in the references above.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a href="https://demo.redhat.com" target="_blank" class="poweredBy"><p>Powered by</p><div class="labInfo_poweredBy" style="display: block; width: 260px;"><svg class="labInfo_poweredByLogo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1508.5 178.739"><g fill="#111"><path d="M316.6 63.2v-56H342a21.279 21.279 0 0 1 7.8 1.3 18.111 18.111 0 0 1 5.9 3.5 15.577 15.577 0 0 1 5 11.8 15.051 15.051 0 0 1-3.1 9.5 16.836 16.836 0 0 1-8.4 5.8l12.5 24.1h-9.3l-11.6-23H325v23Zm24.7-48.6H325v18.7h16.3q5.25 0 8.1-2.7a8.7 8.7 0 0 0 2.8-6.6 8.7 8.7 0 0 0-2.8-6.6c-1.8-1.9-4.5-2.8-8.1-2.8ZM364.1 42.8a20.674 20.674 0 0 1 1.6-8.2 20.288 20.288 0 0 1 4.3-6.7 19.92 19.92 0 0 1 6.5-4.5 19.718 19.718 0 0 1 8-1.6 18.463 18.463 0 0 1 7.8 1.6 18.677 18.677 0 0 1 6.2 4.5 20.927 20.927 0 0 1 4.1 6.8 23.2 23.2 0 0 1 1.5 8.4v2.3H372a13.822 13.822 0 0 0 4.6 8.4 13.6 13.6 0 0 0 9.1 3.3 15.553 15.553 0 0 0 5.7-1 12.858 12.858 0 0 0 4.6-2.6l5.1 5a25.983 25.983 0 0 1-7.4 4.1 24.69 24.69 0 0 1-8.4 1.3 21.306 21.306 0 0 1-8.4-1.6 22.763 22.763 0 0 1-6.8-4.4 20.788 20.788 0 0 1-4.5-6.7 23.2 23.2 0 0 1-1.5-8.4Zm20.2-14.2a11.527 11.527 0 0 0-8 3 13.046 13.046 0 0 0-4.2 7.8h24.2a13.091 13.091 0 0 0-4.2-7.8 11.106 11.106 0 0 0-7.8-3ZM443.1 63.2v-3.8a19.448 19.448 0 0 1-5.8 3.3 18.924 18.924 0 0 1-6.7 1.2 19.824 19.824 0 0 1-14.6-6.1 22.268 22.268 0 0 1-4.4-6.7 21.812 21.812 0 0 1 0-16.4A20.534 20.534 0 0 1 416 28a19.335 19.335 0 0 1 6.6-4.5 20.334 20.334 0 0 1 8.2-1.6 20.7 20.7 0 0 1 6.6 1 19.415 19.415 0 0 1 5.7 3V7.2l8-1.8v57.8Zm-25.2-20.4a13.718 13.718 0 0 0 4 10.1 13.45 13.45 0 0 0 9.8 4.1 14.956 14.956 0 0 0 6.4-1.3 15.954 15.954 0 0 0 4.9-3.6V33.6a14.988 14.988 0 0 0-4.9-3.5 15.271 15.271 0 0 0-6.4-1.3 13.423 13.423 0 0 0-9.9 4 13.806 13.806 0 0 0-3.9 10ZM478.1 63.2v-56h8.4v24h29.8v-24h8.4v56h-8.4V38.8h-29.8v24.4ZM547.2 64a16.483 16.483 0 0 1-10.8-3.5 11.037 11.037 0 0 1-4.2-8.9 10.375 10.375 0 0 1 4.7-9.2 20.76 20.76 0 0 1 11.8-3.2 27.841 27.841 0 0 1 5.8.6 27.374 27.374 0 0 1 5.3 1.6v-4.3a8.143 8.143 0 0 0-2.6-6.5 11.452 11.452 0 0 0-7.4-2.2 20.788 20.788 0 0 0-6 .9 34.616 34.616 0 0 0-6.6 2.6l-3-6a54.169 54.169 0 0 1 8.4-3.1 33.18 33.18 0 0 1 8.3-1.1c5.2 0 9.3 1.3 12.2 3.8s4.4 6.1 4.4 10.8v27h-7.8v-3.5a19.441 19.441 0 0 1-5.8 3.2 23.54 23.54 0 0 1-6.7 1Zm-7.3-12.6a5.646 5.646 0 0 0 2.6 4.8 11.193 11.193 0 0 0 6.6 1.8 16.256 16.256 0 0 0 5.9-1 14.449 14.449 0 0 0 4.9-2.9V47a19.778 19.778 0 0 0-4.8-1.8 24.933 24.933 0 0 0-5.7-.6 11.859 11.859 0 0 0-6.8 1.8 5.728 5.728 0 0 0-2.7 5ZM580.6 53.2v-24H572v-6.7h8.6V12.1l7.9-1.9v12.3h12v6.7h-12v22.1a5.94 5.94 0 0 0 1.4 4.4c.9.9 2.5 1.3 4.6 1.3a23.637 23.637 0 0 0 3-.2 10.857 10.857 0 0 0 2.8-.8v6.7a19.28 19.28 0 0 1-3.8.9 27.484 27.484 0 0 1-3.8.3c-3.9 0-7-.9-9-2.8-2-1.7-3.1-4.4-3.1-7.9Z"></path></g><path d="M127 90.2c12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4L149.8 37c-1.7-7.1-3.2-10.3-15.7-16.6-9.7-5-30.8-13.1-37.1-13.1-5.8 0-7.5 7.5-14.4 7.5-6.7 0-11.6-5.6-17.9-5.6-6 0-9.9 4.1-12.9 12.5 0 0-8.4 23.7-9.5 27.2a4.216 4.216 0 0 0-.3 1.9c0 9.2 36.3 39.4 85 39.4Zm32.5-11.4c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3C21.8 58.8 0 61.8 0 81c0 31.5 74.6 70.3 133.7 70.3 45.3 0 56.7-20.5 56.7-36.6-.1-12.8-11-27.3-30.9-35.9Z" fill="#e00"></path><path d="M159.5 78.8c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3l3.7-9.1a4.877 4.877 0 0 0-.3 2c0 9.2 36.3 39.4 85 39.4 12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4Z"></path><path d="M253.5 158.7a2.22 2.22 0 0 1-2.2-2.2V2.2a2.2 2.2 0 0 1 4.4 0v154.2a2.242 2.242 0 0 1-2.2 2.3Z" fill="#111"></path><text data-name="Demo Platform" transform="translate(1186 149)" fill="#111" font-size="82" font-family="'RedHatDisplay', 'Overpass', overpass, helvetica, arial, sans-serif" font-weight="700"><tspan x="-877.892" y="0">Demo Platform</tspan></text></svg></div></a>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
